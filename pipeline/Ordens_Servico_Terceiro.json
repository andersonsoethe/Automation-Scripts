{
	"name": "Ordens_Servico_Terceiro",
	"properties": {
		"activities": [
			{
				"name": "Ordens_HTML5",
				"type": "Copy",
				"dependsOn": [],
				"policy": {
					"timeout": "7.00:00:00",
					"retry": 0,
					"retryIntervalInSeconds": 30,
					"secureOutput": false,
					"secureInput": false
				},
				"userProperties": [],
				"typeProperties": {
					"source": {
						"type": "OracleSource",
						"oracleReaderQuery": "SELECT a.NR_SEQUENCIA,\n\t   a.ds_ordem,\n\t   a.NR_SEQ_LOCALIZACAO,\n       a.ds_localizacao,\n\t   a.nr_seq_equipamento,\n       a.ds_equipamento,\n\t   a.cd_pessoa_solicitante,\n       a.nm_solicitante,\n\t   a.dt_ordem_servico,\n\t   a.ie_prioridade,\n\t   a.ds_dano_breve,\n\t   a.dt_atualizacao,\n\t   a.nm_usuario,\n\t   a.dt_inicio_desejado,\n\t   a.ds_dano,\n\t   a.dt_fim_previsto,\n\t   a.dt_inicio_real,\n\t   a.dt_fim_real,\n\t   substr(obter_desc_status_os(a.nr_sequencia),1,255) ie_status_ordem,\n\t   a.nr_grupo_planej,\n\t   a.nr_grupo_trabalho,\n\t   a.nr_seq_estagio,\n\t   a.dt_reabertura,\n\t   a.cd_funcao,\n\t   a.ie_classificacao,\n       a.ds_situacao,\n\t   a.ie_grau_satisfacao,\n\t   a.nr_seq_wheb,\n\t   a.ie_origem_os,\n\t   a.ie_tipo_ordem,\n\t   a.nr_seq_trab,\n\t   a.cd_setor,\n\t   a.ds_setor_localizacao,\n\t   a.nm_usuario_exec,\n\t   a.ds_estagio,\n\t   a.dt_inicio_semana,\n\t   a.dt_inicio_mes,\n\t   a.dt_ano,\n\t   a.cd_estabelecimento,\n\t   substr(Man_Obter_Se_Novo_Hist(a.nr_sequencia, 'Allan.C' ),1,3) ie_novo_hist,\n\t   substr(man_obter_dados_estagio(a.nr_seq_estagio,'C'),1,15) ds_cor_fonte_estagio,\n\t   substr(man_obter_dados_estagio(a.nr_seq_estagio,'F'),1,15) ds_cor_fundo_estagio,\n\t   substr(obter_valor_dominio(1197,a.ie_grau_satisfacao),1,255) ds_grau_satisfacao, \n       a.NM_USUARIO_EXEC_PREV,   \n        a.nr_seq_origem,   \n        a.ie_parado,   \n        a.dt_inicio_previsto,   \n        a.dt_conclusao_desejada,   \n        a.ds_setor_atendimento,   \n        a.ds_grupo_trabalho,   \n        SUBSTR(man_obter_complexidade(a.nr_seq_complex),1,100) ds_complexidade,     \n        a.ds_origem_os,   \n        SUBSTR(obter_descricao_padrao('SERVICO','DS_SERVICO', a.nr_seq_servico),1,255) ds_servico,   \n        ROUND(NVL(obter_hora_entre_datas(a.dt_ordem_servico, NVL(a.dt_aceite_os,SYSDATE)),0),0) qt_horas_aberta,   \n        ROUND(NVL(obter_hora_entre_datas(a.dt_aceite_os,NVL(a.dt_fim_real,SYSDATE)),0),0) qt_horas_processo,   \n        ROUND(NVL(obter_hora_entre_datas(a.dt_ordem_servico, NVL(a.dt_fim_real,SYSDATE)),0),0) qt_horas_total,   \n        man_obter_data_ult_hist(a.nr_sequencia) dt_ult_hist\n        FROM\tman_ordem_servico_v2 a\nwhere a.nr_seq_equipamento = 47\nORDER BY DS_ESTAGIO asc ",
						"partitionOption": "None"
					},
					"sink": {
						"type": "AzureSqlSink"
					},
					"enableStaging": false,
					"translator": {
						"type": "TabularTranslator",
						"mappings": [
							{
								"source": {
									"name": "NR_SEQUENCIA"
								},
								"sink": {
									"name": "nr_sequencia",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "DS_ORDEM"
								},
								"sink": {
									"name": "ds_ordem",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "NR_SEQ_LOCALIZACAO"
								},
								"sink": {
									"name": "nr_seq_localizacao",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "DS_LOCALIZACAO"
								},
								"sink": {
									"name": "ds_localizacao",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "NR_SEQ_EQUIPAMENTO"
								},
								"sink": {
									"name": "nr_seq_equipamento",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "DS_EQUIPAMENTO"
								},
								"sink": {
									"name": "ds_equipamento",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "CD_PESSOA_SOLICITANTE"
								},
								"sink": {
									"name": "cd_pessoa_solicitante",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "NM_SOLICITANTE"
								},
								"sink": {
									"name": "nm_solicitante",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DT_ORDEM_SERVICO"
								},
								"sink": {
									"name": "dt_ordem_servico",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "IE_PRIORIDADE"
								},
								"sink": {
									"name": "ie_prioridade",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DS_DANO_BREVE"
								},
								"sink": {
									"name": "ds_dano_breve",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DT_ATUALIZACAO"
								},
								"sink": {
									"name": "dt_atualizacao",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "NM_USUARIO"
								},
								"sink": {
									"name": "nm_usuario",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DT_INICIO_DESEJADO"
								},
								"sink": {
									"name": "dt_inicio_desejado",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "DS_DANO"
								},
								"sink": {
									"name": "ds_dano",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DT_FIM_PREVISTO"
								},
								"sink": {
									"name": "dt_fim_previsto",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "DT_INICIO_REAL"
								},
								"sink": {
									"name": "dt_inicio_real",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "DT_FIM_REAL"
								},
								"sink": {
									"name": "dt_fim_real",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "IE_STATUS_ORDEM"
								},
								"sink": {
									"name": "ie_status_ordem",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "NR_GRUPO_PLANEJ"
								},
								"sink": {
									"name": "nr_grupo_planej",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "NR_GRUPO_TRABALHO"
								},
								"sink": {
									"name": "nr_grupo_trabalho",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "NR_SEQ_ESTAGIO"
								},
								"sink": {
									"name": "nr_seq_estagio",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "DT_REABERTURA"
								},
								"sink": {
									"name": "dt_reabertura",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "CD_FUNCAO"
								},
								"sink": {
									"name": "cd_funcao",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "IE_CLASSIFICACAO"
								},
								"sink": {
									"name": "ie_classificacao",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DS_SITUACAO"
								},
								"sink": {
									"name": "ds_situacao",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "IE_GRAU_SATISFACAO"
								},
								"sink": {
									"name": "ie_grau_satisfacao",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "NR_SEQ_WHEB"
								},
								"sink": {
									"name": "nr_seq_wheb",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "IE_ORIGEM_OS"
								},
								"sink": {
									"name": "ie_origem_os",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "IE_TIPO_ORDEM"
								},
								"sink": {
									"name": "ie_tipo_ordem",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "NR_SEQ_TRAB"
								},
								"sink": {
									"name": "nr_seq_trab",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "CD_SETOR"
								},
								"sink": {
									"name": "cd_setor",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "DS_SETOR_LOCALIZACAO"
								},
								"sink": {
									"name": "ds_setor_localizacao",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "NM_USUARIO_EXEC"
								},
								"sink": {
									"name": "nm_usuario_exec",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DS_ESTAGIO"
								},
								"sink": {
									"name": "ds_estagio",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DT_INICIO_SEMANA"
								},
								"sink": {
									"name": "dt_inicio_semana",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "DT_INICIO_MES"
								},
								"sink": {
									"name": "dt_inicio_mes",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "DT_ANO"
								},
								"sink": {
									"name": "dt_ano",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "CD_ESTABELECIMENTO"
								},
								"sink": {
									"name": "cd_estabelecimento",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "IE_NOVO_HIST"
								},
								"sink": {
									"name": "ie_novo_hist",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DS_COR_FONTE_ESTAGIO"
								},
								"sink": {
									"name": "ds_cor_fonte_estagio",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DS_COR_FUNDO_ESTAGIO"
								},
								"sink": {
									"name": "ds_cor_fundo_estagio",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DS_GRAU_SATISFACAO"
								},
								"sink": {
									"name": "ds_grau_satisfacao",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "NM_USUARIO_EXEC_PREV"
								},
								"sink": {
									"name": "nm_usuario_exec_prev",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "NR_SEQ_ORIGEM"
								},
								"sink": {
									"name": "nr_seq_origem",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "IE_PARADO"
								},
								"sink": {
									"name": "ie_parado",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DT_INICIO_PREVISTO"
								},
								"sink": {
									"name": "dt_inicio_previsto",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "DT_CONCLUSAO_DESEJADA"
								},
								"sink": {
									"name": "dt_conclusao_desejada",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "DS_SETOR_ATENDIMENTO"
								},
								"sink": {
									"name": "ds_setor_atendimento",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DS_GRUPO_TRABALHO"
								},
								"sink": {
									"name": "ds_grupo_trabalho",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DS_COMPLEXIDADE"
								},
								"sink": {
									"name": "ds_complexidade",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DS_ORIGEM_OS"
								},
								"sink": {
									"name": "ds_origem_os",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DS_SERVICO"
								},
								"sink": {
									"name": "ds_servico",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "QT_HORAS_ABERTA"
								},
								"sink": {
									"name": "qt_horas_aberta",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "QT_HORAS_PROCESSO"
								},
								"sink": {
									"name": "qt_horas_processo",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "QT_HORAS_TOTAL"
								},
								"sink": {
									"name": "qt_horas_total",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "DT_ULT_HIST"
								},
								"sink": {
									"name": "dt_ult_hist",
									"type": "DateTime"
								}
							}
						]
					}
				},
				"inputs": [
					{
						"referenceName": "CloudTasyPrdDataSet",
						"type": "DatasetReference"
					}
				],
				"outputs": [
					{
						"referenceName": "AZ_SQL_TB_Ordens_Servico_Terceiro",
						"type": "DatasetReference"
					}
				]
			},
			{
				"name": "Ordens_HTML5_Hist",
				"type": "Copy",
				"dependsOn": [
					{
						"activity": "Ordens_HTML5",
						"dependencyConditions": [
							"Succeeded"
						]
					}
				],
				"policy": {
					"timeout": "7.00:00:00",
					"retry": 0,
					"retryIntervalInSeconds": 30,
					"secureOutput": false,
					"secureInput": false
				},
				"userProperties": [],
				"typeProperties": {
					"source": {
						"type": "OracleSource",
						"oracleReaderQuery": "select x.nr_seq_ordem_serv, \n       x.ie_origem, \n       x.nr_seq_tipo, \n       x.nm_usuario_lib, \n       x.dt_atualizacao, \n       x.ds_relat_tecnico\nfrom man_ordem_serv_tecnico x",
						"partitionOption": "None"
					},
					"sink": {
						"type": "AzureSqlSink"
					},
					"enableStaging": false,
					"translator": {
						"type": "TabularTranslator",
						"mappings": [
							{
								"source": {
									"name": "NR_SEQ_ORDEM_SERV"
								},
								"sink": {
									"name": "nr_seq_ordem_serv",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "IE_ORIGEM"
								},
								"sink": {
									"name": "ie_origem",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "NR_SEQ_TIPO"
								},
								"sink": {
									"name": "nr_seq_tipo",
									"type": "Int32"
								}
							},
							{
								"source": {
									"name": "NM_USUARIO_LIB"
								},
								"sink": {
									"name": "nm_usuario_lib",
									"type": "String"
								}
							},
							{
								"source": {
									"name": "DT_ATUALIZACAO"
								},
								"sink": {
									"name": "dt_atualizacao",
									"type": "DateTime"
								}
							},
							{
								"source": {
									"name": "DS_RELAT_TECNICO"
								},
								"sink": {
									"name": "ds_relat_tecnico",
									"type": "String"
								}
							}
						]
					}
				},
				"inputs": [
					{
						"referenceName": "CloudTasyPrdDataSet",
						"type": "DatasetReference"
					}
				],
				"outputs": [
					{
						"referenceName": "AZ_SQL_TB_Ordens_Servico_Hist",
						"type": "DatasetReference"
					}
				]
			}
		],
		"folder": {
			"name": "Ordens de Serviço"
		},
		"annotations": []
	}
}